{% extends 'ifAnalytics/base.html' %}



{% block content %}

<!-- Scripts para criação do gráfico -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- pegando os dados para popular os gráficos -->
<script>
       {% block jquery %}
              var endpoint = '/get_data/'
              var data_from_view2;
              // var defaultData = []
              // var labels = [];
              $.ajax({
                  method: "GET",
                  url: endpoint,
                  success: function(data_from_view){
                      console.log(data_from_view)
                      // labels = data.labels
                      // defaultData = data.default
                      // drawChart()
                      // drawChart(data_from_view)
                      data_from_view2 = data_from_view
                  },
                  error: function(error_data){
                      console.log("error")
                      console.log(error_data)
                  }
              })





              google.charts.load('current', {'packages':['corechart']});
              google.charts.setOnLoadCallback(function() { drawChart(data_from_view2);});

              // Populando o gráfico com dados
              function drawChart(data_from_view2) {
                     console.log("de dentro da funçao")
                     console.log(data_from_view2[0][1])
              // function drawChart(data_from_view) {

                     //var dadosGrafico = google.visualization.arrayToDataTable(data);
                     //var dadosGrafico = google.visualization.arrayToDataTable([data_from_view]);




                     // var data = google.visualization.arrayToDataTable([
                     //        ['Forma de ingresso', 'Alunos'],

                     //        [data_from_view2[0][0], data_from_view2[0][1]],
                     //        ['Indígena',      2],
                     //        ['Baixa Renda',  2],
                     //        ['Preto/Pardo', 3],
                     //        ['PCD',    7]
                     //        ]);

data = new google.visualization.DataTable();
        data.addColumn('string', 'Forma de Ingresso');
        data.addColumn('number', 'Alunos');
//         for (linhas in data_from_view2) {
//  data.addRows(data_from_view2);             acho q esse for tbm funciona
// }


for (var i = 0; i < data_from_view2.length; i++) {
   data.addRows([data_from_view2[i]]);
   
}

       //isso aqui em baixo funciona mas nao é automatizado
        //data.addRows([data_from_view2[0], data_from_view2[1]]);




                     // var data = google.visualization.arrayToDataTable([
                     //            ['Forma de ingresso', 'alunos'],
                     //            [data_from_view.descricao, data_from_view.alunos],
                     //            // ['2º Bimestre', resp.Meta2],
                     //            // ['3º Bimestre', resp.Meta3],
                     //            // ['4º Bimestre', resp.Meta4],
                     //            // ['5º Bimestre', resp.Meta5],
                     //            // ['6º Bimestre', resp.Meta6]
                     //          ]);









                     var options = {
                            title: 'Forma de Ingresso',
                            backgroundColor: '#E1F0DB',
                            //colors: ['#83E4A1', '#79F1C3', '#11E1A9', '#09B249', '#10FB69']
                            //colors: ['#2E8B57', '#7CFC00', '#006400', '#3CB371', '#32CD32']
                            //colors: ['#00a900', '#00b514', '#1bc124', '#1bc124', '#44d93f']
                            //colors: ['#b2ffa1', '#66d659', '#8adf7b', '#aae89c', '#c7f0bd']
                            //colors: ['#7fffd4', '#006400', '#228b22', '#008000', '#3cb371']
                            //teste com outras cores https://encycolorpedia.pt/html

                               
                     };

                     var chart = new google.visualization.PieChart(document.getElementById('piechart'));

                     //chart.draw(dadosGrafico, options);
                     chart.draw(data, options);
              }

       {% endblock %}
</script>


<div id="dashboards">
	<!-- Plotagem do gráfico -->
	<div id="piechart" style="width: 400px; height: 300px;"></div>
</div>
{% endblock %}