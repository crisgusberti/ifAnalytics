{% extends 'ifAnalytics/base.html' %}

{% block content %}

<!-- Scripts para criação do gráfico -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script> //GRÁFICO FORMA DE INGRESSO
       {% block jquery %}
       var data_recieved;
              //pegando os dados da view "get_data_forma_ingresso" para popular o gráfico
              $.ajax({
                  method: "GET",
                  url: '/get_data_forma_ingresso/',
                  success: function(data_from_view){
                     data_recieved = data_from_view
                  },
                  error: function(error_data){
                     console.log("error")
                     console.log(error_data)
                  }
              })

              google.charts.load('current', {'packages':['corechart']});
              google.charts.setOnLoadCallback(function() {drawChart(data_recieved);});

              // Populando o gráfico com dados
              function drawChart(data_recieved) {
                     data = new google.visualization.DataTable();
                     data.addColumn('string', 'Forma de Ingresso');
                     data.addColumn('number', 'Alunos');
                     
                     for (var i = 0; i < data_recieved.length; i++) {
                            data.addRows([data_recieved[i]]);
                     }

                     var options = {
                            title: 'Forma de Ingresso',
                            backgroundColor: '#E1F0DB',
                            chartArea: {left: 10, height: 250, width: 600},
                            legend: {textStyle: {fontSize: 11}},
                            titleTextStyle: {fontSize:14, bold: true, color:'grey'},
                     };

                     var chart = new google.visualization.PieChart(document.getElementById('piechart'));

                     chart.draw(data, options);
              }

       {% endblock %}
</script>

<!-- <script> //GRÁFICO STATUS DISCENTE
       {% block status_discente %}
              //pegando os dados da view "get_data_status_discente" para popular o gráfico
              $.ajax({
                  method: "GET",
                  url: '/get_data_status_discente/',
                  success: function(data_from_view){
                     data_recieved = data_from_view
                  },
                  error: function(error_data){
                     console.log("error")
                     console.log(error_data)
                  }
              })

              google.charts.load('current', {'packages':['corechart']});
              google.charts.setOnLoadCallback(function() {drawChart(data_recieved);});

              // Populando o gráfico com dados
              function drawChart(data_recieved) {
                     data = new google.visualization.DataTable();
                     data.addColumn('string', 'Status dos Discentes');
                     data.addColumn('number', 'Alunos');
                     
                     for (var i = 0; i < data_recieved.length; i++) {
                            data.addRows([data_recieved[i]]);
                     }

                     var options = {
                            title: 'Status dos Discentes',
                            backgroundColor: '#E1F0DB',
                            chartArea: {left: 10, height: 250, width: 600},
                            legend: {textStyle: {fontSize: 11}},
                            titleTextStyle: {fontSize:14, bold: true, color:'grey'},
                     };

                     var chart = new google.visualization.PieChart(document.getElementById('piechart'));

                     chart.draw(data, options);
              }

       {% endblock %}
</script> -->


<div id="dashboards">
	<!-- Plotagem do gráfico -->
	<div id="piechart" style="width: 600px; height: 300px;"></div>
       <br><br>
       <!-- <div id="piechart_status_discente" style="width: 600px; height: 300px;"></div> -->
</div>
{% endblock %}